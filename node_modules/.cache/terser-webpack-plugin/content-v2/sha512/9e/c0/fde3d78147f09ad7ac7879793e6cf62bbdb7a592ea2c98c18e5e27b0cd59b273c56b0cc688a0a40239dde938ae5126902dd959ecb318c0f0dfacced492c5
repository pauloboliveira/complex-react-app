{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{210:function(e,a,t){\"use strict\";t.r(a);var s=t(0),c=t.n(s),r=t(8),n=t(13),l=t(14),m=t(182),i=t.n(m);a.default=function(){const e=Object(s.useRef)(null),a=Object(s.useRef)(null),t=Object(s.useRef)(null),m=Object(s.useContext)(r.a),u=Object(s.useContext)(n.a),[o,h]=Object(l.a)({fieldValue:\"\",chatMessages:[]});return Object(s.useEffect)(()=>{m.isChatOpen&&(a.current.focus(),u({type:\"clearUnreadChatCount\"}))},[m.isChatOpen]),Object(s.useEffect)(()=>(e.current=i()(\"http://localhost:8080\"),e.current.on(\"chatFromServer\",e=>{h(a=>{a.chatMessages.push(e)})}),()=>e.current.disconnect()),[]),Object(s.useEffect)(()=>{t.current.scrollTop=t.current.scrollHeight,o.chatMessages.length&&!m.isChatOpen&&u({type:\"incrementUnreadChatCount\"})},[o.chatMessages]),c.a.createElement(\"div\",{id:\"chat-wrapper\",className:\"chat-wrapper shadow border-top border-left border-right \"+(m.isChatOpen?\"chat-wrapper--is-visible\":\"\")},c.a.createElement(\"div\",{className:\"chat-title-bar bg-primary\"},\"Chat\",c.a.createElement(\"span\",{onClick:()=>u({type:\"closeChat\"}),className:\"chat-title-bar-close\"},c.a.createElement(\"i\",{className:\"fas fa-times-circle\"}))),c.a.createElement(\"div\",{id:\"chat\",className:\"chat-log\",ref:t},o.chatMessages.map((e,a)=>e.username==m.user.username?c.a.createElement(\"div\",{className:\"chat-self\",key:a},c.a.createElement(\"div\",{className:\"chat-message\"},c.a.createElement(\"div\",{className:\"chat-message-inner\"},e.message)),c.a.createElement(\"img\",{className:\"chat-avatar avatar-tiny\",src:e.avatar})):c.a.createElement(\"div\",{className:\"chat-other\",key:a},c.a.createElement(\"a\",{href:\"#\"},c.a.createElement(\"img\",{className:\"avatar-tiny\",src:e.avatar})),c.a.createElement(\"div\",{className:\"chat-message\"},c.a.createElement(\"div\",{className:\"chat-message-inner\"},c.a.createElement(\"a\",{href:\"#\"},c.a.createElement(\"strong\",null,e.username,\": \")),e.message))))),c.a.createElement(\"form\",{onSubmit:function(a){a.preventDefault(),e.current.emit(\"chatFromBrowser\",{message:o.fieldValue,token:m.user.token}),h(e=>{e.chatMessages.push({message:e.fieldValue,username:m.user.username,avatar:m.user.avatar}),e.fieldValue=\"\"})},id:\"chatForm\",className:\"chat-form border-top\"},c.a.createElement(\"input\",{value:o.fieldValue,onChange:function(e){const a=e.target.value;h(e=>{e.fieldValue=a})},ref:a,type:\"text\",className:\"chat-field\",id:\"chatField\",placeholder:\"Type a messageâ€¦\",autoComplete:\"off\"})))}}}]);","extractedComments":[]}